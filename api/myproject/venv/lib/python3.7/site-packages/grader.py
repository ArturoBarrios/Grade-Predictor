from flask import Flask
from flask_cors import CORS
from flask import request
from MusicPredictionFiles.scripts.PredictSongsNoGUI2 import Predictor
import time
app = Flask(__name__)
CORS(app)

@app.route('/get_grades', methods=['GET', 'POST'])
def get_grades(): 
    i = 0
    num_of_files = len(request.files)
    while i<num_of_files:
        file_name = "file"+str(i)
        file = request.files[file_name].read()
        print("raw file: ", file)
        prediction = Predictor.predictSong(file)
        console.log("rediction: ", prediction)
        i+=1


    
    res = dict()
    res["file1"] = 3
    res["file2"] = 8
    res["file3"] = 5
    res["file4"] = 6
    # time.sleep(3)
    # 

    return file.read()